"use strict";(()=>{var e={};e.id=744,e.ids=[744],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8710:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>c,routeModule:()=>u,serverHooks:()=>d,staticGenerationAsyncStorage:()=>l});var a={};s.r(a),s.d(a,{POST:()=>p,runtime:()=>i});var r=s(9303),n=s(8716),o=s(670);let i="nodejs";async function p(e){try{let t,s;let a=await e.json(),r=process.env.OPENAI_API_KEY,n=process.env.OPENAI_MODEL||"gpt-3.5-turbo";if(!r)return new Response("Missing OpenAI API key",{status:500});if(Array.isArray(a?.messages)&&(t=a.messages),t)s={model:n,messages:t,stream:!1};else{let e=a?.message;if(!e||"string"!=typeof e)return new Response("Bad request",{status:400});s={model:n,messages:[{role:"system",content:"You are a helpful assistant for a physical therapy lead-gen site. Answer clearly in 4-8 sentences max, actionable, friendly, and avoid diagnosis. Encourage safe self-care and prompt in-person evaluation when red flags appear (severe pain, numbness, loss of bowel/bladder control, fever, recent trauma, or worsening symptoms). Stay non-judgmental. If users ask about scheduling or clinic details, politely say you can connect them with a human if contact info is provided."},{role:"user",content:e}],stream:!1}}let o=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(s)});if(!o.ok){let e=await o.text().catch(()=>"");return new Response(`Upstream error: ${e}`,{status:500})}let i=await o.json(),p=i?.choices?.[0],u=p?.message?.content||"";return new Response(u,{headers:{"Content-Type":"text/plain; charset=utf-8","Cache-Control":"no-store"}})}catch(e){return new Response(`Server error: ${String(e)}`,{status:500})}}let u=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:"app/api/chat/route"},resolvedPagePath:"/Users/maxwellzirbel/Desktop/test/app/api/chat/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:d}=u,h="/api/chat/route";function m(){return(0,o.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:l})}},9303:(e,t,s)=>{e.exports=s(517)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948],()=>s(8710));module.exports=a})();